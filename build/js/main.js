function changeRisksColor(){var e=document.querySelector(".cube-reg-content__risks"),t=chroma.scale(["#199B07","#FF4A00","#E80008"]).colors(101),r=document.querySelector(".cube-reg-content__risks-value").innerHTML,o=t[r];e.style.color=o,e.style.borderColor=o}function addBottomBlock(){for(var e=document.querySelectorAll(".cube-tasks__plus--bottom"),t=0;t<e.length;t++)e[t].onclick=function(){var t=this.parentNode.parentNode.parentNode.parentNode,r=t.querySelector(".cube-tasks__block-bottom-line").cloneNode(!1),o=t.querySelector(".cube-tasks__task-container").cloneNode(!0);o.querySelector("input").value="",o.querySelector("textarea").value="",r.appendChild(o),r.appendChild(t.querySelector(".cube-tasks__subtask-container").cloneNode(!1)),t.querySelector(".cube-tasks__plus--bottom").addEventListener("click",function(){}),r.querySelector(".cube-tasks__plus--right").style.display="block",r.classList.add("cube-tasks__block-bottom-line--animated"),document.querySelector(".cube-tasks__box").insertBefore(r,document.querySelector(".cube-tasks__button")),e=document.querySelectorAll(".cube-tasks__plus--bottom"),addBottomBlock(),document.querySelector(".cube-tasks__box").style.height=parseInt(getComputedStyle(document.querySelector(".cube-tasks__box")).height)+746+"px",document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor()};for(var r=document.querySelectorAll(".cube-tasks__plus--right"),t=0;t<r.length;t++){var o=r[t].parentNode.parentNode.parentNode.querySelectorAll(".cube-tasks__subtask");o.length>=2?r[t].style.display="none":r[t].onclick=function(){var e=this.parentNode.parentNode.parentNode,t=document.querySelector(".cube-tasks__subtask").cloneNode(!0);t.querySelector("input").value="",t.querySelector("textarea").value="",t.classList.add("cube-tasks__subtask--animated"),e.querySelector(".cube-tasks__subtask-container").appendChild(t),addBottomBlock(),document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor()}}}function newprojectCalculateRisks(){var e=document.querySelectorAll(".cube-new-project__box option:checked"),t=parseInt(e[0].getAttribute("name")),r=parseInt(e[1].getAttribute("name")),o=newprojectRisksValue-t-r;document.querySelector(".cube-reg-content__risks-value").innerHTML=o,changeRisksColor()}function milestonesCalculateRisks(){for(var e=document.querySelector(".cube-milestones__form-block"),t=document.querySelectorAll(".cube-milestones__item"),r=0;r<t.length;r++){var o=t[r].querySelector(".cube-milestones__input"),n=t[r].querySelector(".cube-milestones__date-input");o?""!=o.value&&""!=n.value?n.setAttribute("name","5"):n.setAttribute("name","0"):""!=n.value?n.setAttribute("name","5"):n.setAttribute("name","0")}var c=e.querySelectorAll(".cube-milestones__date-input"),u=parseInt(c[0].getAttribute("name")),l=parseInt(c[1].getAttribute("name")),s=parseInt(c[2].getAttribute("name")),a=milestonesRisksValue-u-l-s;document.querySelector(".cube-reg-content__risks-value").innerHTML=a,changeRisksColor()}var cubeHelpLinkText=document.querySelector(".cube-reg-content__help-question"),cubeHelpLinkImg=document.querySelector(".cube-reg-content__help-img"),cubeHelpContact=document.querySelector(".cube-reg-content__help-contact");cubeHelpLinkText.onclick=function(){"block"==cubeHelpContact.style.display?cubeHelpContact.style.display="none":cubeHelpContact.style.display="block"},cubeHelpLinkImg.onclick=function(){"block"==cubeHelpContact.style.display?cubeHelpContact.style.display="none":cubeHelpContact.style.display="block"};var risksBlock=document.querySelector(".cube-reg-content__risks"),cubeRisksColorArray=chroma.scale(["#199B07","#FF4A00","#E80008"]).colors(101),num=document.querySelector(".cube-reg-content__risks-value").innerHTML,cubeRisksColor=cubeRisksColorArray[num];addBottomBlock();for(var requirementPlusButton=document.querySelectorAll(".cube-requirements__plus-img"),i=0;i<requirementPlusButton.length;i++)requirementPlusButton[i].style.backgroundColor=getComputedStyle(requirementPlusButton[i].parentNode.parentNode.querySelector(".cube-requirements__item-label")).backgroundColor,requirementPlusButton[i].addEventListener("click",function(){var e=this.parentNode.querySelector(".cube-requirements__task-box").cloneNode(!0);e.querySelector("input").value="",e.querySelector("textarea").value="",e.classList.add("cube-requirements__task-box--animate"),this.parentNode.insertBefore(e,this.parentNode.querySelector(".cube-requirements__plus-img"));var t=this.parentNode.parentNode.querySelector(".cube-requirements__item-label"),r=this.parentNode.parentNode;r=getComputedStyle(r),t.style.height=r.height,this.parentNode.parentNode.querySelector(".cube-requirements__item-span").style.width=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-span").style.height=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-label").style.height=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-content").style.height=parseInt(r.height)+280+"px",document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor()});document.querySelector(".cube-new-project form")&&(this.onchange=newprojectCalculateRisks);var newprojectRisksValue=document.querySelector(" .cube-reg-content__risks-value").innerHTML;document.querySelector(".cube-milestones form")&&(this.onchange=milestonesCalculateRisks);var milestonesRisksValue=parseInt(document.querySelector(".cube-reg-content__risks-value").innerHTML);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2hhbmdlUmlza3NDb2xvciIsInJpc2tzQmxvY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdWJlUmlza3NDb2xvckFycmF5IiwiY2hyb21hIiwic2NhbGUiLCJjb2xvcnMiLCJudW0iLCJpbm5lckhUTUwiLCJjdWJlUmlza3NDb2xvciIsInN0eWxlIiwiY29sb3IiLCJib3JkZXJDb2xvciIsImFkZEJvdHRvbUJsb2NrIiwicGx1c1Rhc2tCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsIm9uY2xpY2siLCJ0aGlzQmxvY2siLCJ0aGlzIiwicGFyZW50Tm9kZSIsImNsb25lVGFzayIsImNsb25lTm9kZSIsIml0ZW0iLCJ2YWx1ZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BsYXkiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnNlcnRCZWZvcmUiLCJoZWlnaHQiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJwbHVzU3ViVGFza0J1dHRvbiIsInN1YlRhc2tzIiwiY2xvbmVTdWJ0YXNrIiwibmV3cHJvamVjdENhbGN1bGF0ZVJpc2tzIiwiYXJyYXlPZlZhbHVlcyIsInMiLCJnZXRBdHRyaWJ1dGUiLCJmIiwiYiIsIm5ld3Byb2plY3RSaXNrc1ZhbHVlIiwibWlsZXN0b25lc0NhbGN1bGF0ZVJpc2tzIiwibWlsZXN0b25lc0Zvcm1CbG9jayIsIm1pbGVzdG9uZXNMaXN0SXRlbSIsImlucHV0IiwiZGF0ZSIsInNldEF0dHJpYnV0ZSIsImRhdGVBcnJheSIsImEiLCJjIiwiZCIsIm1pbGVzdG9uZXNSaXNrc1ZhbHVlIiwiY3ViZUhlbHBMaW5rVGV4dCIsImN1YmVIZWxwTGlua0ltZyIsImN1YmVIZWxwQ29udGFjdCIsInJlcXVpcmVtZW50UGx1c0J1dHRvbiIsImJhY2tncm91bmRDb2xvciIsImxlZnRMYWJlbCIsImJsb2NrSGVpZ2h0Iiwid2lkdGgiLCJvbmNo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Q00iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjdWJlSGVscExpbmtUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX2hlbHAtcXVlc3Rpb24nKTtcbnZhciBjdWJlSGVscExpbmtJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9faGVscC1pbWcnKTtcbnZhciBjdWJlSGVscENvbnRhY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9faGVscC1jb250YWN0Jyk7XG5jdWJlSGVscExpbmtUZXh0Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPT0gXCJibG9ja1wiKSB7XG4gICAgICAgIGN1YmVIZWxwQ29udGFjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxufVxuY3ViZUhlbHBMaW5rSW1nLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGN1YmVIZWxwQ29udGFjdC5zdHlsZS5kaXNwbGF5ID09IFwiYmxvY2tcIikge1xuICAgICAgICAgICAgY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1YmVIZWxwQ29udGFjdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vINGA0LDQt9Cy0L7RgNCw0YfQuNCy0LDQvdC40LUg0Lgg0YHQstC+0YDQsNGH0LjQstCw0L3QuNC1INC60L3QvtC/0LrQuCBcItCd0YPQttC90LAg0L/QvtC80L7RidGMP1wiXG5cblxuXG52YXIgcmlza3NCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19yaXNrcycpO1xuLy8gcmlza3MtYmxvY2tcbnZhciBjdWJlUmlza3NDb2xvckFycmF5ID0gY2hyb21hLnNjYWxlKFsnIzE5OUIwNycsICcjRkY0QTAwJywgJyNFODAwMDgnXSkuY29sb3JzKDEwMSk7XG4vLyBtYWRlIGFycmF5IG9mIGNvbG9yc1xudmFyIG51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19yaXNrcy12YWx1ZScpLmlubmVySFRNTDtcbi8vIHZhcmlhYmxlIGZvciBjb2xvciBkZXRlcm1pYXRpb25cbnZhciBjdWJlUmlza3NDb2xvciA9IGN1YmVSaXNrc0NvbG9yQXJyYXlbbnVtXTtcbi8vIHZhcmlhYmxlIG9mIHJpc2tzLWJsb2NrJ3MgY29sb3JcbmZ1bmN0aW9uIGNoYW5nZVJpc2tzQ29sb3IoKSB7XG4gICAgdmFyIHJpc2tzQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MnKTtcbiAgICB2YXIgY3ViZVJpc2tzQ29sb3JBcnJheSA9IGNocm9tYS5zY2FsZShbJyMxOTlCMDcnLCAnI0ZGNEEwMCcsICcjRTgwMDA4J10pLmNvbG9ycygxMDEpO1xuICAgIHZhciBudW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUw7XG4gICAgdmFyIGN1YmVSaXNrc0NvbG9yID0gY3ViZVJpc2tzQ29sb3JBcnJheVtudW1dO1xuICAgIC8vIHJld3JpdGVkIGRhdGFcbiAgICByaXNrc0Jsb2NrLnN0eWxlLmNvbG9yID0gY3ViZVJpc2tzQ29sb3I7XG4gICAgcmlza3NCbG9jay5zdHlsZS5ib3JkZXJDb2xvciA9IGN1YmVSaXNrc0NvbG9yO1xuICAgIC8vIGRlZmluZSByaXNrcy1ibG9jaydzIGNvbG9yXG59XG5mdW5jdGlvbiBhZGRCb3R0b21CbG9jaygpIHtcblxuICAgIHZhciBwbHVzVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdWJlLXRhc2tzX19wbHVzLS1ib3R0b20nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdXNUYXNrQnV0dG9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBsdXNUYXNrQnV0dG9uW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGlzQmxvY2sgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB2YXIgY2xvbmVUYXNrID0gdGhpc0Jsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19ibG9jay1ib3R0b20tbGluZScpLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXNCbG9jay5xdWVyeVNlbGVjdG9yKFwiLmN1YmUtdGFza3NfX3Rhc2stY29udGFpbmVyXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgY2xvbmVUYXNrLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgICAgICAgY2xvbmVUYXNrLmFwcGVuZENoaWxkKHRoaXNCbG9jay5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fc3VidGFzay1jb250YWluZXInKS5jbG9uZU5vZGUoZmFsc2UpKTtcbiAgICAgICAgICAgIHRoaXNCbG9jay5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fcGx1cy0tYm90dG9tJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBhKCkge30pO1xuICAgICAgICAgICAgY2xvbmVUYXNrLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19wbHVzLS1yaWdodCcpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBjbG9uZVRhc2suY2xhc3NMaXN0LmFkZCgnY3ViZS10YXNrc19fYmxvY2stYm90dG9tLWxpbmUtLWFuaW1hdGVkJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fYm94JykuaW5zZXJ0QmVmb3JlKGNsb25lVGFzaywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX2J1dHRvbicpKTtcbiAgICAgICAgICAgIHBsdXNUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtdGFza3NfX3BsdXMtLWJvdHRvbScpO1xuICAgICAgICAgICAgYWRkQm90dG9tQmxvY2soKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19ib3gnKS5zdHlsZS5oZWlnaHQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19ib3gnKSkuaGVpZ2h0KSArIDc0NiArIFwicHhcIjtcblxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MIC09IDE7XG4gICAgICAgICAgICAvLyDQvNC10L3Rj9C10Lwg0LfQvdCw0YfQtdC90LjQtSDRgNC40YHQutC+0LJcbiAgICAgICAgICAgIGNoYW5nZVJpc2tzQ29sb3IoKTtcbiAgICAgICAgICAgIC8vIGNoYW5nZSBjb2xvciBvZiByaXNrcy1ibG9ja1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgdmFyIHBsdXNTdWJUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtdGFza3NfX3BsdXMtLXJpZ2h0Jyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVzU3ViVGFza0J1dHRvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3ViVGFza3MgPSBwbHVzU3ViVGFza0J1dHRvbltpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS10YXNrc19fc3VidGFzaycpO1xuICAgICAgICBpZiAoc3ViVGFza3MubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHBsdXNTdWJUYXNrQnV0dG9uW2ldLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBsdXNTdWJUYXNrQnV0dG9uW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0Jsb2NrID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVTdWJ0YXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX3N1YnRhc2snKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2xvbmVTdWJ0YXNrLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNsb25lU3VidGFzay5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBjbG9uZVN1YnRhc2suY2xhc3NMaXN0LmFkZCgnY3ViZS10YXNrc19fc3VidGFzay0tYW5pbWF0ZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzQmxvY2sucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX3N1YnRhc2stY29udGFpbmVyJykuYXBwZW5kQ2hpbGQoY2xvbmVTdWJ0YXNrKTtcbiAgICAgICAgICAgICAgICBhZGRCb3R0b21CbG9jaygpO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MIC09IDE7XG4gICAgICAgICAgICAgICAgLy8g0LzQtdC90Y/QtdC8INC30L3QsNGH0LXQvdC40LUg0YDQuNGB0LrQvtCyXG4gICAgICAgICAgICAgICAgY2hhbmdlUmlza3NDb2xvcigpO1xuICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBjb2xvciBvZiByaXNrcy1ibG9ja1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5hZGRCb3R0b21CbG9jaygpO1xuLy8g0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAg0L/Qu9GO0YEg0LTQvtCx0LDQstC70Y/QtdGC0YHRjyDQsdC70L7QuiDRgtGA0LXQsdC+0LLQsNC90LjQuVxudmFyIHJlcXVpcmVtZW50UGx1c0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdWJlLXJlcXVpcmVtZW50c19fcGx1cy1pbWcnKTtcbmZvciAodmFyIGkgPSAwOyBpIDwgcmVxdWlyZW1lbnRQbHVzQnV0dG9uLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVxdWlyZW1lbnRQbHVzQnV0dG9uW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGdldENvbXB1dGVkU3R5bGUocmVxdWlyZW1lbnRQbHVzQnV0dG9uW2ldLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZXF1aXJlbWVudHNfX2l0ZW0tbGFiZWwnKSkuYmFja2dyb3VuZENvbG9yO1xuICAgIC8vINC30LDQtNCw0LXQvCDRhtCy0LXRgiDQutCw0LbQtNC+0Lkg0LrQvdC+0L/QutC1INCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRhtCy0LXRgtCwINC70LXQstC+0LPQviDQsdC70L7QutCwXG4gICAgcmVxdWlyZW1lbnRQbHVzQnV0dG9uW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX190YXNrLWJveCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgaXRlbS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlID0gXCJcIjtcbiAgICAgICAgaXRlbS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlID0gXCJcIjtcbiAgICAgICAgLy8g0LrQu9C+0L3QuNGA0YPQtdGC0YHRjyDQsdC70L7QuiDRgSDQvtGH0LjRidC10L3QvdGL0LzQuCDQv9C+0LvRj9C80LhcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiY3ViZS1yZXF1aXJlbWVudHNfX3Rhc2stYm94LS1hbmltYXRlXCIpO1xuICAgICAgICB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGl0ZW0sIHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZXF1aXJlbWVudHNfX3BsdXMtaW1nJykpO1xuICAgICAgICAvLyDQstGB0YLQsNCy0LvQtdC9INCx0LvQvtC6XG5cbiAgICAgICAgdmFyIGxlZnRMYWJlbCA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19faXRlbS1sYWJlbCcpO1xuICAgICAgICB2YXIgYmxvY2tIZWlnaHQgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgYmxvY2tIZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlKGJsb2NrSGVpZ2h0KTtcbiAgICAgICAgbGVmdExhYmVsLnN0eWxlLmhlaWdodCA9IGJsb2NrSGVpZ2h0LmhlaWdodDtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX19pdGVtLXNwYW4nKS5zdHlsZS53aWR0aCA9IChwYXJzZUludChibG9ja0hlaWdodC5oZWlnaHQpICsgMjgwKSArIFwicHhcIjtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX19pdGVtLXNwYW4nKS5zdHlsZS5oZWlnaHQgPSAocGFyc2VJbnQoYmxvY2tIZWlnaHQuaGVpZ2h0KSArIDI4MCkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19faXRlbS1sYWJlbCcpLnN0eWxlLmhlaWdodCA9IChwYXJzZUludChibG9ja0hlaWdodC5oZWlnaHQpICsgMjgwKSArIFwicHhcIjtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX19pdGVtLWNvbnRlbnQnKS5zdHlsZS5oZWlnaHQgPSAocGFyc2VJbnQoYmxvY2tIZWlnaHQuaGVpZ2h0KSArIDI4MCkgKyBcInB4XCI7XG4gICAgICAgIC8vINGD0YHRgtCw0L3QvtCy0LrQsCDQstGL0YHQvtGC0Ysg0LvQtdCy0L7Qs9C+INCx0LvQvtC60LAg0YEg0L3QsNC30LLQsNC90LjQtdC8IFxuICAgICAgICAvLyB2YXIgdmFsID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShpdGVtKS5oZWlnaHQpICsgMTM7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCk7XG4gICAgICAgIC8vIHdpbmRvdy5zY3JvbGxCeSgwLCB2YWwpO1xuICAgICAgICAvLyDRgdC60YDQvtC70LvQuNGC0YHRjyDQvdCwINCy0YvRgdC+0YLRgyDQtNC+0LHQsNCy0LvQtdC90L3QvtCz0L4g0Y3Qu9C10LzQtdC90YLQsFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwgLT0gMTtcbiAgICAgICAgLy8g0LzQtdC90Y/QtdC8INC30L3QsNGH0LXQvdC40LUg0YDQuNGB0LrQvtCyXG4gICAgICAgIGNoYW5nZVJpc2tzQ29sb3IoKTtcbiAgICAgICAgLy8gY2hhbmdlIGNvbG9yIG9mIHJpc2tzLWJsb2NrXG4gICAgfSk7XG59XG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtbmV3LXByb2plY3QgZm9ybScpKSB7XG4gICAgdGhpcy5vbmNoYW5nZSA9IG5ld3Byb2plY3RDYWxjdWxhdGVSaXNrcztcbn1cblxudmFyIG5ld3Byb2plY3RSaXNrc1ZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIC5jdWJlLXJlZy1jb250ZW50X19yaXNrcy12YWx1ZScpLmlubmVySFRNTDtcblxuZnVuY3Rpb24gbmV3cHJvamVjdENhbGN1bGF0ZVJpc2tzKCkge1xuXG4gICAgLy8gZ2V0IHJpc2tzIHZhbHVlXG4gICAgdmFyIGFycmF5T2ZWYWx1ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS1uZXctcHJvamVjdF9fYm94IG9wdGlvbjpjaGVja2VkJyk7XG4gICAgLy8gZmluZCBhbGwgY2hlY2tlZCBzZWxlY3QtaXRlbXNcbiAgICB2YXIgcyA9IHBhcnNlSW50KGFycmF5T2ZWYWx1ZXNbMF0uZ2V0QXR0cmlidXRlKCduYW1lJykpO1xuICAgIHZhciBmID0gcGFyc2VJbnQoYXJyYXlPZlZhbHVlc1sxXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSk7XG4gICAgdmFyIGIgPSBuZXdwcm9qZWN0Umlza3NWYWx1ZSAtIHMgLSBmO1xuICAgIC8vIGNhbGN1bGF0ZSBkaWZmZXJlbmNlXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MID0gYjtcbiAgICAvLyBzZXQgcmlza3MgdmFsdWUgXG4gICAgY2hhbmdlUmlza3NDb2xvcigpO1xuICAgIC8vIGNoYW5nZSBjb2xvciBvZiByaXNrcy1ibG9ja1xufTtcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1taWxlc3RvbmVzIGZvcm0nKSkge1xuICAgIHRoaXMub25jaGFuZ2UgPSBtaWxlc3RvbmVzQ2FsY3VsYXRlUmlza3M7XG59XG52YXIgbWlsZXN0b25lc1Jpc2tzVmFsdWUgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwpO1xuXG5mdW5jdGlvbiBtaWxlc3RvbmVzQ2FsY3VsYXRlUmlza3MoKSB7XG5cbiAgICAvLyBnZXQgcmlza3MgdmFsdWVcbiAgICB2YXIgbWlsZXN0b25lc0Zvcm1CbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLW1pbGVzdG9uZXNfX2Zvcm0tYmxvY2snKTtcbiAgICB2YXIgbWlsZXN0b25lc0xpc3RJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtbWlsZXN0b25lc19faXRlbScpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWlsZXN0b25lc0xpc3RJdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpbnB1dCA9IG1pbGVzdG9uZXNMaXN0SXRlbVtpXS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1taWxlc3RvbmVzX19pbnB1dCcpO1xuICAgICAgICB2YXIgZGF0ZSA9IG1pbGVzdG9uZXNMaXN0SXRlbVtpXS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1taWxlc3RvbmVzX19kYXRlLWlucHV0Jyk7XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlICE9IFwiXCIgJiYgZGF0ZS52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnNScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0ZS52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICc1Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICcwJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gc2V0IHZhbHVlcyBmb3IgZm9ybSBlbGVlbnRzXG4gICAgdmFyIGRhdGVBcnJheSA9IG1pbGVzdG9uZXNGb3JtQmxvY2sucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtbWlsZXN0b25lc19fZGF0ZS1pbnB1dCcpO1xuICAgIHZhciBhID0gcGFyc2VJbnQoZGF0ZUFycmF5WzBdLmdldEF0dHJpYnV0ZSgnbmFtZScpKTtcbiAgICB2YXIgYiA9IHBhcnNlSW50KGRhdGVBcnJheVsxXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSk7XG4gICAgdmFyIGMgPSBwYXJzZUludChkYXRlQXJyYXlbMl0uZ2V0QXR0cmlidXRlKCduYW1lJykpO1xuICAgIHZhciBkID0gbWlsZXN0b25lc1Jpc2tzVmFsdWUgLSBhIC0gYiAtIGM7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MID0gZDtcbiAgICAvLyBzZXQgcmlza3MgdmFsdWUgXG4gICAgY2hhbmdlUmlza3NDb2xvcigpO1xuICAgIC8vIGNoYW5nZSBjb2xvciBvZiByaXNrcy1ibG9ja1xufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
