function changeRisksColor(){var e=document.querySelector(".cube-reg-content__risks"),t=chroma.scale(["#199B07","#FF4A00","#E80008"]).colors(101),r=document.querySelector(".cube-reg-content__risks-value").innerHTML,o=t[r];e.style.color=o,e.style.borderColor=o}function addBottomBlock(){for(var e=document.querySelectorAll(".cube-tasks__plus--bottom"),t=0;t<e.length;t++)e[t].onclick=function(){var t=this.parentNode.parentNode.parentNode.parentNode,r=t.querySelector(".cube-tasks__block-bottom-line").cloneNode(!1),o=t.querySelector(".cube-tasks__task-container").cloneNode(!0);o.querySelector("input").value="",o.querySelector("textarea").value="",r.appendChild(o),r.appendChild(t.querySelector(".cube-tasks__subtask-container").cloneNode(!1)),t.querySelector(".cube-tasks__plus--bottom").addEventListener("click",function(){}),r.querySelector(".cube-tasks__plus--right").style.display="block",r.classList.add("cube-tasks__block-bottom-line--animated"),document.querySelector(".cube-tasks__box").insertBefore(r,document.querySelector(".cube-tasks__button")),e=document.querySelectorAll(".cube-tasks__plus--bottom"),addBottomBlock(),document.querySelector(".cube-tasks__box").style.height=parseInt(getComputedStyle(document.querySelector(".cube-tasks__box")).height)+746+"px",document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor(),taskTotalTime()};for(var r=document.querySelectorAll(".cube-tasks__plus--right"),t=0;t<r.length;t++){var o=r[t].parentNode.parentNode.parentNode.querySelectorAll(".cube-tasks__subtask");o.length>=2?r[t].style.display="none":r[t].onclick=function(){var e=this.parentNode.parentNode.parentNode,t=document.querySelector(".cube-tasks__subtask").cloneNode(!0);t.querySelector("input").value="",t.querySelector("textarea").value="",t.classList.add("cube-tasks__subtask--animated"),e.querySelector(".cube-tasks__subtask-container").appendChild(t),addBottomBlock(),document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor(),taskTotalTime()}}}function taskTotalTime(){for(var e=document.querySelectorAll(".cube-tasks__block-bottom-line"),t=0;t<e.length;t++){for(var r="0ч",o=e[t].querySelector(".cube-tasks__total-time-value"),n=e[t].querySelectorAll(".cube-tasks__select-time"),c=0;c<n.length;c++){var u=n[c].value,r=parseInt(r)+parseInt(u)+" ч";n[c].addEventListener("change",function(){taskTotalTime()})}o.innerHTML=r}}function newprojectCalculateRisks(){var e=document.querySelectorAll(".cube-new-project__box option:checked");if(1==e.length)var t=parseInt(e[0].getAttribute("name")),r=newprojectRisksValue-t;else if(2==e.length)var t=parseInt(e[0].getAttribute("name")),o=parseInt(e[1].getAttribute("name")),r=newprojectRisksValue-t-o;document.querySelector(".cube-reg-content__risks-value").innerHTML=r,changeRisksColor()}function milestonesCalculateRisks(){for(var e=document.querySelector(".cube-milestones__form-block"),t=document.querySelectorAll(".cube-milestones__item"),r=0;r<t.length;r++){var o=t[r].querySelector(".cube-milestones__input"),n=t[r].querySelector(".cube-milestones__date-input");o?""!=o.value&&""!=n.value?n.setAttribute("name","5"):n.setAttribute("name","0"):""!=n.value?n.setAttribute("name","5"):n.setAttribute("name","0")}var c=e.querySelectorAll(".cube-milestones__date-input"),u=parseInt(c[0].getAttribute("name")),l=parseInt(c[1].getAttribute("name")),s=parseInt(c[2].getAttribute("name")),a=milestonesRisksValue-u-l-s;document.querySelector(".cube-reg-content__risks-value").innerHTML=a,changeRisksColor()}var cubeHelpLinkText=document.querySelector(".cube-reg-content__help-question"),cubeHelpLinkImg=document.querySelector(".cube-reg-content__help-img"),cubeHelpContact=document.querySelector(".cube-reg-content__help-contact");cubeHelpLinkText.onclick=function(){"block"==cubeHelpContact.style.display?cubeHelpContact.style.display="none":cubeHelpContact.style.display="block"},cubeHelpLinkImg.onclick=function(){"block"==cubeHelpContact.style.display?cubeHelpContact.style.display="none":cubeHelpContact.style.display="block"};var risksBlock=document.querySelector(".cube-reg-content__risks"),cubeRisksColorArray=chroma.scale(["#199B07","#FF4A00","#E80008"]).colors(101),num=document.querySelector(".cube-reg-content__risks-value").innerHTML,cubeRisksColor=cubeRisksColorArray[num];addBottomBlock(),taskTotalTime();for(var requirementPlusButton=document.querySelectorAll(".cube-requirements__plus-img"),i=0;i<requirementPlusButton.length;i++)requirementPlusButton[i].style.backgroundColor=getComputedStyle(requirementPlusButton[i].parentNode.parentNode.querySelector(".cube-requirements__item-label")).backgroundColor,requirementPlusButton[i].addEventListener("click",function(){var e=this.parentNode.querySelector(".cube-requirements__task-box").cloneNode(!0);e.querySelector("input").value="",e.querySelector("textarea").value="",e.classList.add("cube-requirements__task-box--animate"),this.parentNode.insertBefore(e,this.parentNode.querySelector(".cube-requirements__plus-img"));var t=this.parentNode.parentNode.querySelector(".cube-requirements__item-label"),r=this.parentNode.parentNode;r=getComputedStyle(r),t.style.height=r.height,this.parentNode.parentNode.querySelector(".cube-requirements__item-span").style.width=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-span").style.height=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-label").style.height=parseInt(r.height)+280+"px",this.parentNode.parentNode.querySelector(".cube-requirements__item-content").style.height=parseInt(r.height)+280+"px",document.querySelector(".cube-reg-content__risks-value").innerHTML-=1,changeRisksColor()});document.querySelector(".cube-new-project form")&&(this.onchange=newprojectCalculateRisks);var newprojectRisksValue=document.querySelector(" .cube-reg-content__risks-value").innerHTML;document.querySelector(".cube-milestones form")&&(this.onchange=milestonesCalculateRisks);var milestonesRisksValue=parseInt(document.querySelector(".cube-reg-content__risks-value").innerHTML);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2hhbmdlUmlza3NDb2xvciIsInJpc2tzQmxvY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdWJlUmlza3NDb2xvckFycmF5IiwiY2hyb21hIiwic2NhbGUiLCJjb2xvcnMiLCJudW0iLCJpbm5lckhUTUwiLCJjdWJlUmlza3NDb2xvciIsInN0eWxlIiwiY29sb3IiLCJib3JkZXJDb2xvciIsImFkZEJvdHRvbUJsb2NrIiwicGx1c1Rhc2tCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsIm9uY2xpY2siLCJ0aGlzQmxvY2siLCJ0aGlzIiwicGFyZW50Tm9kZSIsImNsb25lVGFzayIsImNsb25lTm9kZSIsIml0ZW0iLCJ2YWx1ZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BsYXkiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnNlcnRCZWZvcmUiLCJoZWlnaHQiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJ0YXNrVG90YWxUaW1lIiwicGx1c1N1YlRhc2tCdXR0b24iLCJzdWJUYXNrcyIsImNsb25lU3VidGFzayIsInRhc2tBcnJheSIsInRvdGFsVGltZSIsInRvdGFsVGltZVNwYW4iLCJ0aW1lVmFsdWVBcnJheSIsInkiLCJleGVjdXRpb25UaW1lIiwibmV3cHJvamVjdENhbGN1bGF0ZVJpc2tzIiwiYXJyYXlPZlZhbHVlcyIsInMiLCJnZXRBdHRyaWJ1dGUiLCJiIiwibmV3cHJvamVjdFJpc2tzVmFsdWUiLCJmIiwibWlsZXN0b25lc0NhbGN1bGF0ZVJpc2tzIiwibWlsZXN0b25lc0Zvcm1CbG9jayIsIm1pbGVzdG9uZXNMaXN0SXRlbSIsImlucHV0IiwiZGF0ZSIsInNldEF0dHJpYnV0ZSIsImRhdGVBcnJheSIsImEiLCJjIiwiZCIsIm1pbGVzdG9uZXNSaXNrc1ZhbHVlIiwiY3ViZUhlbHBMaW5rVGV4dCIsImN1YmVIZWxwTGlua0ltZyIsImN1YmVIZWxwQ29udGFjdCIsInJlcXVpcmVtZW50UGx1c0J1dHRvbiIsImJhY2tncm91bmRDb2xvciIsImxlZnRMYWJlbCIsImJsb2NrSGVpZ2h0Iiwid2lkdGgiLCJvbmNoYW5nZSJdLCJtYXBwaW5ncyI6IkFBNkJBLFFBQVNBLG9CQUNMLEdBQUlDLEdBQWFDLFNBQVNDLGNBQWMsNEJBQ3BDQyxFQUFzQkMsT0FBT0MsT0FBTyxVQUFXLFVBQVcsWUFBWUMsT0FBTyxLQUM3RUMsRUFBTU4sU0FBU0MsY0FBYyxrQ0FBa0NNLFVBQy9EQyxFQUFpQk4sRUFBb0JJLEVBRXpDUCxHQUFXVSxNQUFNQyxNQUFRRixFQUN6QlQsRUFBV1UsTUFBTUUsWUFBY0gsRUFHbkMsUUFBU0ksa0JBR0wsSUFBSyxHQUREQyxHQUFpQmIsU0FBU2MsaUJBQWlCLDZCQUN0Q0MsRUFBSSxFQUFHQSxFQUFJRixFQUFlRyxPQUFRRCxJQUN2Q0YsRUFBZUUsR0FBR0UsUUFBVSxXQUN4QixHQUFJQyxHQUFZQyxLQUFLQyxXQUFXQSxXQUFXQSxXQUFXQSxXQUNsREMsRUFBWUgsRUFBVWpCLGNBQWMsa0NBQWtDcUIsV0FBVSxHQUNoRkMsRUFBT0wsRUFBVWpCLGNBQWMsK0JBQStCcUIsV0FBVSxFQUM1RUMsR0FBS3RCLGNBQWMsU0FBU3VCLE1BQVEsR0FDcENELEVBQUt0QixjQUFjLFlBQVl1QixNQUFRLEdBQ3ZDSCxFQUFVSSxZQUFZRixHQUN0QkYsRUFBVUksWUFBWVAsRUFBVWpCLGNBQWMsa0NBQWtDcUIsV0FBVSxJQUMxRkosRUFBVWpCLGNBQWMsNkJBQTZCeUIsaUJBQWlCLFFBQVMsY0FDL0VMLEVBQVVwQixjQUFjLDRCQUE0QlEsTUFBTWtCLFFBQVUsUUFDcEVOLEVBQVVPLFVBQVVDLElBQUksMkNBQ3hCN0IsU0FBU0MsY0FBYyxvQkFBb0I2QixhQUFhVCxFQUFXckIsU0FBU0MsY0FBYyx3QkFDMUZZLEVBQWlCYixTQUFTYyxpQkFBaUIsNkJBQzNDRixpQkFDQVosU0FBU0MsY0FBYyxvQkFBb0JRLE1BQU1zQixPQUFTQyxTQUFTQyxpQkFB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RSxFQUFjakQsS0FBS0MsV0FBV0EsVUFDbENnRCxHQUFjbkMsaUJBQWlCbUMsR0FDL0JELEVBQVUxRCxNQUFNc0IsT0FBU3FDLEVBQVlyQyxPQUNyQ1osS0FBS0MsV0FBV0EsV0FBV25CLGNBQWMsaUNBQWlDUSxNQUFNNEQsTUFBU3JDLFNBQVNvQyxFQUFZckMsUUFBVSxJQUFPLEtBQy9IWixLQUFLQyxXQUFXQSxXQUFXbkIsY0FBYyxpQ0FBaUNRLE1BQU1zQixPQUFVQyxTQUFTb0MsRUFBWXJDLFFBQVUsSUFBTyxLQUNoSVosS0FBS0MsV0FBV0EsV0FBV25CLGNBQWMsa0NBQWtDUSxNQUFNc0IsT0FBVUMsU0FBU29DLEVBQVlyQyxRQUFVLElBQU8sS0FDaklaLEtBQUtDLFdBQVdBLFdBQVduQixjQUFjLG9DQUFvQ1EsTUFBTXNCLE9BQVVDLFNBQVNvQyxFQUFZckMsUUFBVSxJQUFPLEtBTW5JL0IsU0FBU0MsY0FBYyxrQ0FBa0NNLFdBQWEsRUFFdEVULG9CQUlKRSxVQUFTQyxjQUFjLDRCQUN2QmtCLEtBQUttRCxTQUFXMUIseUJBR3BCLElBQUlLLHNCQUF1QmpELFNBQVNDLGNBQWMsbUNBQW1DTSxTQXFCakZQLFVBQVNDLGNBQWMsMkJBQ3ZCa0IsS0FBS21ELFNBQVduQix5QkFFcEIsSUFBSVUsc0JBQXVCN0IsU0FBU2hDLFNBQVNDLGNBQWMsa0NBQWtDTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGN1YmVIZWxwTGlua1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9faGVscC1xdWVzdGlvbicpO1xudmFyIGN1YmVIZWxwTGlua0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19oZWxwLWltZycpO1xudmFyIGN1YmVIZWxwQ29udGFjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19oZWxwLWNvbnRhY3QnKTtcbmN1YmVIZWxwTGlua1RleHQub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChjdWJlSGVscENvbnRhY3Quc3R5bGUuZGlzcGxheSA9PSBcImJsb2NrXCIpIHtcbiAgICAgICAgY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjdWJlSGVscENvbnRhY3Quc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG59XG5jdWJlSGVscExpbmtJbWcub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPT0gXCJibG9ja1wiKSB7XG4gICAgICAgICAgICBjdWJlSGVscENvbnRhY3Quc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3ViZUhlbHBDb250YWN0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8g0YDQsNC30LLQvtGA0LDRh9C40LLQsNC90LjQtSDQuCDRgdCy0L7RgNCw0YfQuNCy0LDQvdC40LUg0LrQvdC+0L/QutC4IFwi0J3Rg9C20L3QsCDQv9C+0LzQvtGJ0Yw/XCJcblxuXG5cbnZhciByaXNrc0Jsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzJyk7XG4vLyByaXNrcy1ibG9ja1xudmFyIGN1YmVSaXNrc0NvbG9yQXJyYXkgPSBjaHJvbWEuc2NhbGUoWycjMTk5QjA3JywgJyNGRjRBMDAnLCAnI0U4MDAwOCddKS5jb2xvcnMoMTAxKTtcbi8vIG1hZGUgYXJyYXkgb2YgY29sb3JzXG52YXIgbnVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MO1xuLy8gdmFyaWFibGUgZm9yIGNvbG9yIGRldGVybWlhdGlvblxudmFyIGN1YmVSaXNrc0NvbG9yID0gY3ViZVJpc2tzQ29sb3JBcnJheVtudW1dO1xuLy8gdmFyaWFibGUgb2Ygcmlza3MtYmxvY2sncyBjb2xvclxuZnVuY3Rpb24gY2hhbmdlUmlza3NDb2xvcigpIHtcbiAgICB2YXIgcmlza3NCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19yaXNrcycpO1xuICAgIHZhciBjdWJlUmlza3NDb2xvckFycmF5ID0gY2hyb21hLnNjYWxlKFsnIzE5OUIwNycsICcjRkY0QTAwJywgJyNFODAwMDgnXSkuY29sb3JzKDEwMSk7XG4gICAgdmFyIG51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19yaXNrcy12YWx1ZScpLmlubmVySFRNTDtcbiAgICB2YXIgY3ViZVJpc2tzQ29sb3IgPSBjdWJlUmlza3NDb2xvckFycmF5W251bV07XG4gICAgLy8gcmV3cml0ZWQgZGF0YVxuICAgIHJpc2tzQmxvY2suc3R5bGUuY29sb3IgPSBjdWJlUmlza3NDb2xvcjtcbiAgICByaXNrc0Jsb2NrLnN0eWxlLmJvcmRlckNvbG9yID0gY3ViZVJpc2tzQ29sb3I7XG4gICAgLy8gZGVmaW5lIHJpc2tzLWJsb2NrJ3MgY29sb3Jcbn1cbmZ1bmN0aW9uIGFkZEJvdHRvbUJsb2NrKCkge1xuXG4gICAgdmFyIHBsdXNUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtdGFza3NfX3BsdXMtLWJvdHRvbScpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1c1Rhc2tCdXR0b24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGx1c1Rhc2tCdXR0b25baV0ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoaXNCbG9jayA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHZhciBjbG9uZVRhc2sgPSB0aGlzQmxvY2sucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX2Jsb2NrLWJvdHRvbS1saW5lJykuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpc0Jsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuY3ViZS10YXNrc19fdGFzay1jb250YWluZXJcIikuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgaXRlbS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBjbG9uZVRhc2suYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICBjbG9uZVRhc2suYXBwZW5kQ2hpbGQodGhpc0Jsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19zdWJ0YXNrLWNvbnRhaW5lcicpLmNsb25lTm9kZShmYWxzZSkpO1xuICAgICAgICAgICAgdGhpc0Jsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19wbHVzLS1ib3R0b20nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGEoKSB7fSk7XG4gICAgICAgICAgICBjbG9uZVRhc2sucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX3BsdXMtLXJpZ2h0Jykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIGNsb25lVGFzay5jbGFzc0xpc3QuYWRkKCdjdWJlLXRhc2tzX19ibG9jay1ib3R0b20tbGluZS0tYW5pbWF0ZWQnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXRhc2tzX19ib3gnKS5pbnNlcnRCZWZvcmUoY2xvbmVUYXNrLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fYnV0dG9uJykpO1xuICAgICAgICAgICAgcGx1c1Rhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS10YXNrc19fcGx1cy0tYm90dG9tJyk7XG4gICAgICAgICAgICBhZGRCb3R0b21CbG9jaygpO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX2JveCcpLnN0eWxlLmhlaWdodCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX2JveCcpKS5oZWlnaHQpICsgNzQ2ICsgXCJweFwiO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwgLT0gMTtcbiAgICAgICAgICAgIC8vINC80LXQvdGP0LXQvCDQt9C90LDRh9C10L3QuNC1INGA0LjRgdC60L7QslxuICAgICAgICAgICAgY2hhbmdlUmlza3NDb2xvcigpO1xuICAgICAgICAgICAgLy8gY2hhbmdlIGNvbG9yIG9mIHJpc2tzLWJsb2NrXG4gICAgICAgICAgICB0YXNrVG90YWxUaW1lKCk7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICB2YXIgcGx1c1N1YlRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS10YXNrc19fcGx1cy0tcmlnaHQnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdXNTdWJUYXNrQnV0dG9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdWJUYXNrcyA9IHBsdXNTdWJUYXNrQnV0dG9uW2ldLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdWJlLXRhc2tzX19zdWJ0YXNrJyk7XG4gICAgICAgIGlmIChzdWJUYXNrcy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgcGx1c1N1YlRhc2tCdXR0b25baV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGx1c1N1YlRhc2tCdXR0b25baV0ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGlzQmxvY2sgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHZhciBjbG9uZVN1YnRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fc3VidGFzaycpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBjbG9uZVN1YnRhc2sucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY2xvbmVTdWJ0YXNrLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNsb25lU3VidGFzay5jbGFzc0xpc3QuYWRkKCdjdWJlLXRhc2tzX19zdWJ0YXNrLS1hbmltYXRlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXNCbG9jay5xdWVyeVNlbGVjdG9yKCcuY3ViZS10YXNrc19fc3VidGFzay1jb250YWluZXInKS5hcHBlbmRDaGlsZChjbG9uZVN1YnRhc2spO1xuICAgICAgICAgICAgICAgIGFkZEJvdHRvbUJsb2NrKCk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwgLT0gMTtcbiAgICAgICAgICAgICAgICAvLyDQvNC10L3Rj9C10Lwg0LfQvdCw0YfQtdC90LjQtSDRgNC40YHQutC+0LJcbiAgICAgICAgICAgICAgICBjaGFuZ2VSaXNrc0NvbG9yKCk7XG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIGNvbG9yIG9mIHJpc2tzLWJsb2NrXG4gICAgICAgICAgICAgICAgdGFza1RvdGFsVGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5hZGRCb3R0b21CbG9jaygpO1xuXG5cblxuZnVuY3Rpb24gdGFza1RvdGFsVGltZSgpIHtcblxuICAgIHZhciB0YXNrQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS10YXNrc19fYmxvY2stYm90dG9tLWxpbmUnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhc2tBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG90YWxUaW1lID0gXCIw0YdcIjtcbiAgICAgICAgdmFyIHRvdGFsVGltZVNwYW4gPSB0YXNrQXJyYXlbaV0ucXVlcnlTZWxlY3RvcignLmN1YmUtdGFza3NfX3RvdGFsLXRpbWUtdmFsdWUnKTtcbiAgICAgICAgdmFyIHRpbWVWYWx1ZUFycmF5ID0gdGFza0FycmF5W2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdWJlLXRhc2tzX19zZWxlY3QtdGltZScpO1xuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRpbWVWYWx1ZUFycmF5Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICB2YXIgZXhlY3V0aW9uVGltZSA9IHRpbWVWYWx1ZUFycmF5W3ldLnZhbHVlO1xuICAgICAgICAgICAgdmFyIHRvdGFsVGltZSA9IChwYXJzZUludCh0b3RhbFRpbWUpICsgcGFyc2VJbnQoZXhlY3V0aW9uVGltZSkpICsgXCIg0YdcIjtcbiAgICAgICAgICAgIHRpbWVWYWx1ZUFycmF5W3ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRhc2tUb3RhbFRpbWUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRvdGFsVGltZVNwYW4uaW5uZXJIVE1MID0gdG90YWxUaW1lO1xuICAgIH1cbn1cbnRhc2tUb3RhbFRpbWUoKTtcbi8vINC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINC/0LvRjtGBINC00L7QsdCw0LLQu9GP0LXRgtGB0Y8g0LHQu9C+0Log0YLRgNC10LHQvtCy0LDQvdC40LlcbnZhciByZXF1aXJlbWVudFBsdXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS1yZXF1aXJlbWVudHNfX3BsdXMtaW1nJyk7XG5mb3IgKHZhciBpID0gMDsgaSA8IHJlcXVpcmVtZW50UGx1c0J1dHRvbi5sZW5ndGg7IGkrKykge1xuICAgIHJlcXVpcmVtZW50UGx1c0J1dHRvbltpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKHJlcXVpcmVtZW50UGx1c0J1dHRvbltpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX19pdGVtLWxhYmVsJykpLmJhY2tncm91bmRDb2xvcjtcbiAgICAvLyDQt9Cw0LTQsNC10Lwg0YbQstC10YIg0LrQsNC20LTQvtC5INC60L3QvtC/0LrQtSDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YbQstC10YLQsCDQu9C10LLQvtCz0L4g0LHQu9C+0LrQsFxuICAgIHJlcXVpcmVtZW50UGx1c0J1dHRvbltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19fdGFzay1ib3gnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIC8vINC60LvQvtC90LjRgNGD0LXRgtGB0Y8g0LHQu9C+0Log0YEg0L7Rh9C40YnQtdC90L3Ri9C80Lgg0L/QvtC70Y/QvNC4XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImN1YmUtcmVxdWlyZW1lbnRzX190YXNrLWJveC0tYW5pbWF0ZVwiKTtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpdGVtLCB0aGlzLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmN1YmUtcmVxdWlyZW1lbnRzX19wbHVzLWltZycpKTtcbiAgICAgICAgLy8g0LLRgdGC0LDQstC70LXQvSDQsdC70L7QulxuXG4gICAgICAgIHZhciBsZWZ0TGFiZWwgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZXF1aXJlbWVudHNfX2l0ZW0tbGFiZWwnKTtcbiAgICAgICAgdmFyIGJsb2NrSGVpZ2h0ID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGJsb2NrSGVpZ2h0ID0gZ2V0Q29tcHV0ZWRTdHlsZShibG9ja0hlaWdodCk7XG4gICAgICAgIGxlZnRMYWJlbC5zdHlsZS5oZWlnaHQgPSBibG9ja0hlaWdodC5oZWlnaHQ7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19faXRlbS1zcGFuJykuc3R5bGUud2lkdGggPSAocGFyc2VJbnQoYmxvY2tIZWlnaHQuaGVpZ2h0KSArIDI4MCkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19faXRlbS1zcGFuJykuc3R5bGUuaGVpZ2h0ID0gKHBhcnNlSW50KGJsb2NrSGVpZ2h0LmhlaWdodCkgKyAyODApICsgXCJweFwiO1xuICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZXF1aXJlbWVudHNfX2l0ZW0tbGFiZWwnKS5zdHlsZS5oZWlnaHQgPSAocGFyc2VJbnQoYmxvY2tIZWlnaHQuaGVpZ2h0KSArIDI4MCkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlcXVpcmVtZW50c19faXRlbS1jb250ZW50Jykuc3R5bGUuaGVpZ2h0ID0gKHBhcnNlSW50KGJsb2NrSGVpZ2h0LmhlaWdodCkgKyAyODApICsgXCJweFwiO1xuICAgICAgICAvLyDRg9GB0YLQsNC90L7QstC60LAg0LLRi9GB0L7RgtGLINC70LXQstC+0LPQviDQsdC70L7QutCwINGBINC90LDQt9Cy0LDQvdC40LXQvCBcbiAgICAgICAgLy8gdmFyIHZhbCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoaXRlbSkuaGVpZ2h0KSArIDEzO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWwpO1xuICAgICAgICAvLyB3aW5kb3cuc2Nyb2xsQnkoMCwgdmFsKTtcbiAgICAgICAgLy8g0YHQutGA0L7Qu9C70LjRgtGB0Y8g0L3QsCDQstGL0YHQvtGC0YMg0LTQvtCx0LDQstC70LXQvdC90L7Qs9C+INGN0LvQtdC80LXQvdGC0LBcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtcmVnLWNvbnRlbnRfX3Jpc2tzLXZhbHVlJykuaW5uZXJIVE1MIC09IDE7XG4gICAgICAgIC8vINC80LXQvdGP0LXQvCDQt9C90LDRh9C10L3QuNC1INGA0LjRgdC60L7QslxuICAgICAgICBjaGFuZ2VSaXNrc0NvbG9yKCk7XG4gICAgICAgIC8vIGNoYW5nZSBjb2xvciBvZiByaXNrcy1ibG9ja1xuICAgIH0pO1xufVxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLW5ldy1wcm9qZWN0IGZvcm0nKSkge1xuICAgIHRoaXMub25jaGFuZ2UgPSBuZXdwcm9qZWN0Q2FsY3VsYXRlUmlza3M7XG59XG5cbnZhciBuZXdwcm9qZWN0Umlza3NWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyAuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUw7XG5cbmZ1bmN0aW9uIG5ld3Byb2plY3RDYWxjdWxhdGVSaXNrcygpIHtcblxuICAgIC8vIGdldCByaXNrcyB2YWx1ZVxuICAgIHZhciBhcnJheU9mVmFsdWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1YmUtbmV3LXByb2plY3RfX2JveCBvcHRpb246Y2hlY2tlZCcpO1xuICAgIC8vIGZpbmQgYWxsIGNoZWNrZWQgc2VsZWN0LWl0ZW1zXG4gICAgaWYgKGFycmF5T2ZWYWx1ZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgdmFyIHMgPSBwYXJzZUludChhcnJheU9mVmFsdWVzWzBdLmdldEF0dHJpYnV0ZSgnbmFtZScpKTtcbiAgICAgICAgdmFyIGIgPSBuZXdwcm9qZWN0Umlza3NWYWx1ZSAtIHM7XG4gICAgfSBlbHNlIGlmIChhcnJheU9mVmFsdWVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIHZhciBzID0gcGFyc2VJbnQoYXJyYXlPZlZhbHVlc1swXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSk7XG4gICAgICAgIHZhciBmID0gcGFyc2VJbnQoYXJyYXlPZlZhbHVlc1sxXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSk7XG4gICAgICAgIHZhciBiID0gbmV3cHJvamVjdFJpc2tzVmFsdWUgLSBzIC0gZjtcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlIGRpZmZlcmVuY2VcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwgPSBiO1xuICAgIC8vIHNldCByaXNrcyB2YWx1ZSBcbiAgICBjaGFuZ2VSaXNrc0NvbG9yKCk7XG4gICAgLy8gY2hhbmdlIGNvbG9yIG9mIHJpc2tzLWJsb2NrXG59O1xuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLW1pbGVzdG9uZXMgZm9ybScpKSB7XG4gICAgdGhpcy5vbmNoYW5nZSA9IG1pbGVzdG9uZXNDYWxjdWxhdGVSaXNrcztcbn1cbnZhciBtaWxlc3RvbmVzUmlza3NWYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLXJlZy1jb250ZW50X19yaXNrcy12YWx1ZScpLmlubmVySFRNTCk7XG5cbmZ1bmN0aW9uIG1pbGVzdG9uZXNDYWxjdWxhdGVSaXNrcygpIHtcblxuICAgIC8vIGdldCByaXNrcyB2YWx1ZVxuICAgIHZhciBtaWxlc3RvbmVzRm9ybUJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1YmUtbWlsZXN0b25lc19fZm9ybS1ibG9jaycpO1xuICAgIHZhciBtaWxlc3RvbmVzTGlzdEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS1taWxlc3RvbmVzX19pdGVtJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaWxlc3RvbmVzTGlzdEl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGlucHV0ID0gbWlsZXN0b25lc0xpc3RJdGVtW2ldLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLW1pbGVzdG9uZXNfX2lucHV0Jyk7XG4gICAgICAgIHZhciBkYXRlID0gbWlsZXN0b25lc0xpc3RJdGVtW2ldLnF1ZXJ5U2VsZWN0b3IoJy5jdWJlLW1pbGVzdG9uZXNfX2RhdGUtaW5wdXQnKTtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgIT0gXCJcIiAmJiBkYXRlLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICc1Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRlLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJzUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJzAnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgdmFsdWVzIGZvciBmb3JtIGVsZWVudHNcbiAgICB2YXIgZGF0ZUFycmF5ID0gbWlsZXN0b25lc0Zvcm1CbG9jay5xdWVyeVNlbGVjdG9yQWxsKCcuY3ViZS1taWxlc3RvbmVzX19kYXRlLWlucHV0Jyk7XG4gICAgdmFyIGEgPSBwYXJzZUludChkYXRlQXJyYXlbMF0uZ2V0QXR0cmlidXRlKCduYW1lJykpO1xuICAgIHZhciBiID0gcGFyc2VJbnQoZGF0ZUFycmF5WzFdLmdldEF0dHJpYnV0ZSgnbmFtZScpKTtcbiAgICB2YXIgYyA9IHBhcnNlSW50KGRhdGVBcnJheVsyXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSk7XG4gICAgdmFyIGQgPSBtaWxlc3RvbmVzUmlza3NWYWx1ZSAtIGEgLSBiIC0gYztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3ViZS1yZWctY29udGVudF9fcmlza3MtdmFsdWUnKS5pbm5lckhUTUwgPSBkO1xuICAgIC8vIHNldCByaXNrcyB2YWx1ZSBcbiAgICBjaGFuZ2VSaXNrc0NvbG9yKCk7XG4gICAgLy8gY2hhbmdlIGNvbG9yIG9mIHJpc2tzLWJsb2NrXG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
